<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Changelog • processx</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Changelog" />


<meta name="robots" content="noindex">

<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-news">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">processx</a>
        <span class="version label label-danger" data-toggle="tooltip" data-placement="bottom" title="In-development version">3.4.5.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/r-lib/processx/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
      <h1 data-toc-skip>Changelog <small></small></h1>
      <small>Source: <a href='https://github.com/r-lib/processx/blob/master/NEWS.md'><code>NEWS.md</code></a></small>
    </div>

    <div id="processx-345" class="section level1">
<h1 class="page-header" data-toc-text="3.4.5">
<a href="#processx-345" class="anchor"></a>processx 3.4.5<small> 2020-11-30 </small>
</h1>
<ul>
<li><p>New options in <code>pty_options</code> to set the initial size of the pseudo terminal.</p></li>
<li><p>Reading the standard output or error now does not crash occasionally when a <code>\n</code> character is at the beginning of the input buffer (<a href='https://github.com/r-lib/processx/issues/281'>#281</a>).</p></li>
</ul>
</div>
    <div id="processx-344" class="section level1">
<h1 class="page-header" data-toc-text="3.4.4">
<a href="#processx-344" class="anchor"></a>processx 3.4.4<small> 2020-09-03 </small>
</h1>
<ul>
<li><p>processx now works correctly for non-ASCII commands and arguments passed in the native encoding, on Windows (<a href='https://github.com/r-lib/processx/issues/261'>#261</a>, <a href='https://github.com/r-lib/processx/issues/262'>#262</a>, <a href='https://github.com/r-lib/processx/issues/263'>#263</a>, <a href='https://github.com/r-lib/processx/issues/264'>#264</a>).</p></li>
<li><p>Providing multiple environment variables now works on windows (<a href='https://github.com/r-lib/processx/issues/267'>#267</a>).</p></li>
</ul>
</div>
    <div id="processx-343" class="section level1">
<h1 class="page-header" data-toc-text="3.4.3">
<a href="#processx-343" class="anchor"></a>processx 3.4.3<small> 2020-07-05 </small>
</h1>
<ul>
<li><p>The supervisor (activated with <code>supervise = TRUE</code>) does not crash on the Windows Subsystem on Linux (WSL) now (<a href='https://github.com/r-lib/processx/issues/222'>#222</a>).</p></li>
<li><p>Fix ABI compatibility for pre and post R 4.0.1 versions. Now CRAN builds (with R 4.0.2 and later 4.0.x) work well on R 4.0.0.</p></li>
<li><p>Now processx can run commands on UNC paths specified with forward slashes: <code>//hostname/...</code> UNC paths with the usual back-slashes were always fine (<a href='https://github.com/r-lib/processx/issues/249'>#249</a>).</p></li>
<li><p>The <code>$as_ps_handle()</code> method works now better; previously it sometimes created an invalid <code><a href="https://rdrr.io/pkg/ps/man/ps_handle.html">ps::ps_handle</a></code> object, if the system clock has changed (<a href='https://github.com/r-lib/processx/issues/258'>#258</a>).</p></li>
</ul>
</div>
    <div id="processx-342" class="section level1">
<h1 class="page-header" data-toc-text="3.4.2">
<a href="#processx-342" class="anchor"></a>processx 3.4.2<small> 2020-02-09 </small>
</h1>
<ul>
<li><p><code><a href="../reference/run.html">run()</a></code> now does a better job with displaying the spinner on terminals that buffer the output (<a href='https://github.com/r-lib/processx/issues/223'>#223</a>).</p></li>
<li><p>Error messages are now fully printed after an error. In non-interactive sessions, the stack trace is printed as well.</p></li>
<li><p>Further improved error messages. Errors from C code now include the name of the C function, and errors that belong to a process include the system command (<a href='https://github.com/r-lib/processx/issues/197'>#197</a>).</p></li>
<li><p>processx does not crash now if the process receives a SIGPIPE signal when trying to write to a pipe, of which the other end has already exited.</p></li>
<li><p>processx now to works better with fork clusters from the parallel package. See ‘Mixing processx and the parallel base R package’ in the README file (<a href='https://github.com/r-lib/processx/issues/236'>#236</a>).</p></li>
<li><p>processx now does no block SIGCHLD by default in the subprocess, blocking potentially causes zombie sub-subprocesses (<a href='https://github.com/r-lib/processx/issues/240'>#240</a>).</p></li>
<li><p>The <code>process$wait()</code> method now does not leak file descriptors on Unix when interrupted (<a href='https://github.com/r-lib/processx/issues/141'>#141</a>).</p></li>
</ul>
</div>
    <div id="processx-341" class="section level1">
<h1 class="page-header" data-toc-text="3.4.1">
<a href="#processx-341" class="anchor"></a>processx 3.4.1<small> 2019-07-18 </small>
</h1>
<ul>
<li>Now <code><a href="../reference/run.html">run()</a></code> does not create an <code>ok</code> variable in the global environment.</li>
</ul>
</div>
    <div id="processx-340" class="section level1">
<h1 class="page-header" data-toc-text="3.4.0">
<a href="#processx-340" class="anchor"></a>processx 3.4.0<small> 2019-07-03 </small>
</h1>
<ul>
<li><p>Processx has now better error messages, in particular, all errors from C code contain the file name and line number, and the system error code and message (where applicable).</p></li>
<li><p>Processx now sets the <code>.Last.error</code> variable for every un-caught processx error to the error condition, and also sets <code>.Last.error.trace</code> to its stack trace.</p></li>
<li><p><code><a href="../reference/run.html">run()</a></code> now prints the last 10 lines of the standard error stream on error, if <code>echo = FALSE</code>, and it also prints the exit status of the process.</p></li>
<li><p><code><a href="../reference/run.html">run()</a></code> now includes the standard error in the condition signalled on interrupt.</p></li>
<li><p><code>process</code> now supports creating pseudo terminals on Unix systems.</p></li>
<li><p><code><a href="../reference/conn_create_fd.html">conn_create_pipepair()</a></code> gets new argument to set the pipes as blocking or non-blocking.</p></li>
<li><p><code>process</code> does not set the inherited extra connections as blocking, and it also does not close them after starting the subprocess. This is now the responsibility of the user. Note that this is a breaking change.</p></li>
<li><p><code><a href="../reference/run.html">run()</a></code> now passes extra <code>...</code> arguments to <code>process$new()</code>.</p></li>
<li><p><code><a href="../reference/run.html">run()</a></code> now does not error if the process is killed in a callback.</p></li>
</ul>
</div>
    <div id="processx-331" class="section level1">
<h1 class="page-header" data-toc-text="3.3.1">
<a href="#processx-331" class="anchor"></a>processx 3.3.1<small> 2019-05-08 </small>
</h1>
<ul>
<li>Fix a crash on Windows, when a connection that has a pending read internally is finalized.</li>
</ul>
</div>
    <div id="processx-330" class="section level1">
<h1 class="page-header" data-toc-text="3.3.0">
<a href="#processx-330" class="anchor"></a>processx 3.3.0<small> 2019-03-10 </small>
</h1>
<ul>
<li><p><code>process</code> can now redirect the standard error to the standard output, via specifying <code>stderr = "2&gt;&amp;1"</code>. This works both with files and pipes.</p></li>
<li><p><code><a href="../reference/run.html">run()</a></code> can now redirect the standard error to the standard output, via the new <code>stderr_to_stdout</code> argument.</p></li>
<li><p>The <code>$kill()</code> and <code>$kill_tree()</code> methods get a <code>close_connection = TRUE</code> argument that closes all pipe connections of the process.</p></li>
<li><p><code><a href="../reference/run.html">run()</a></code> now always kills the process (and its process tree if <code>cleanup_tree</code> is <code>TRUE</code>) before exiting. This also closes all pipe connections (<a href='https://github.com/r-lib/processx/issues/149'>#149</a>).</p></li>
</ul>
</div>
    <div id="processx-321" class="section level1">
<h1 class="page-header" data-toc-text="3.2.1">
<a href="#processx-321" class="anchor"></a>processx 3.2.1<small> 2018-12-05 </small>
</h1>
<ul>
<li>processx does not depend on assertthat now, and the crayon package is now an optional dependency.</li>
</ul>
</div>
    <div id="processx-320" class="section level1">
<h1 class="page-header" data-toc-text="3.2.0">
<a href="#processx-320" class="anchor"></a>processx 3.2.0<small> 2018-08-16 </small>
</h1>
<ul>
<li><p>New <code>process$kill_tree()</code> method, and new <code>cleanup_tree</code> arguments in <code><a href="../reference/run.html">run()</a></code> and <code>process$new()</code>, to clean up the process tree rooted at a processx process. (<a href='https://github.com/r-lib/processx/issues/139'>#139</a>, <a href='https://github.com/r-lib/processx/issues/143'>#143</a>).</p></li>
<li><p>New <code>process$interupt()</code> method to send an interrupt to a process, SIGINT on Unix, CTRL+C on Windows (<a href='https://github.com/r-lib/processx/issues/127'>#127</a>).</p></li>
<li><p>New <code>stdin</code> argument in <code>process$new()</code> to support writing to the standard input of a process (<a href='https://github.com/r-lib/processx/issues/27'>#27</a>, <a href='https://github.com/r-lib/processx/issues/114'>#114</a>).</p></li>
<li><p>New <code>connections</code> argument in <code>process$new()</code> to support passing extra connections to the child process, in addition to the standard streams.</p></li>
<li><p>New <code>poll_connection</code> argument to <code>process$new()</code>, an extra connection that can be used to poll the process, even if <code>stdout</code> and <code>stderr</code> are not pipes (<a href='https://github.com/r-lib/processx/issues/125'>#125</a>).</p></li>
<li><p><code><a href="../reference/poll.html">poll()</a></code> now works with connections objects, and they can be mixed with process objects (<a href='https://github.com/r-lib/processx/issues/121'>#121</a>).</p></li>
<li><p>New <code>env</code> argument in <code><a href="../reference/run.html">run()</a></code> and <code>process$new()</code>, to set the environment of the child process, optionally (<a href='https://github.com/r-lib/processx/issues/117'>#117</a>, <a href='https://github.com/r-lib/processx/issues/118'>#118</a>).</p></li>
<li><p>Removed the <code>$restart()</code> method, because it was less useful than expected, and hard to maintain (<a href='https://github.com/r-lib/processx/issues/116'>#116</a>).</p></li>
<li><p>New <code><a href="../reference/conn_create_fd.html">conn_set_stdout()</a></code> and <code><a href="../reference/conn_create_fd.html">conn_set_stderr()</a></code> to set the standard output or error of the calling process.</p></li>
<li><p>New <code><a href="../reference/conn_create_fd.html">conn_disable_inheritance()</a></code> to disable stdio inheritance. It is suggested that child processes call this immediately after starting, so the file handles are not inherited further.</p></li>
<li><p>Fixed a signal handler bug on Unix that marked the process as finished, even if it has not (d221aa1f).</p></li>
<li><p>Fixed a bug that occasionally caused crashes in <code>wait()</code>, on Unix (<a href='https://github.com/r-lib/processx/issues/138'>#138</a>).</p></li>
<li><p>When <code><a href="../reference/run.html">run()</a></code> is interrupted, no error message is printed, just like for interruption of R code in general. The thrown condition now also has the <code>interrupt</code> class (<a href='https://github.com/r-lib/processx/issues/148'>#148</a>).</p></li>
</ul>
</div>
    <div id="processx-310" class="section level1">
<h1 class="page-header" data-toc-text="3.1.0">
<a href="#processx-310" class="anchor"></a>processx 3.1.0<small> 2018-05-15 </small>
</h1>
<ul>
<li><p>Fix interference with the parallel package, and other packages that redefine the <code>SIGCHLD</code> signal handler on Unix. If the processx signal handler is overwritten, we might miss the exit status of some processes (they are set to <code>NA</code>).</p></li>
<li><p><code><a href="../reference/run.html">run()</a></code> and <code>process$new()</code> allow specifying the working directory of the process (<a href='https://github.com/r-lib/processx/issues/63'>#63</a>).</p></li>
<li><p>Make the debugme package an optional dependency (<a href='https://github.com/r-lib/processx/issues/74'>#74</a>).</p></li>
<li><p>processx is now compatible with R 3.1.x.</p></li>
<li><p>Allow polling more than 64 connections on Windows, by using IOCP instead of <code>WaitForMultipleObjects()</code> (<a href='https://github.com/r-lib/processx/issues/81'>#81</a>, <a href='https://github.com/r-lib/processx/issues/106'>#106</a>).</p></li>
<li><p>Fix a race condition on Windows, when creating named pipes for stdout or stderr. The client sometimes didn’t wait for the server, and processx failed with ERROR_PIPE_BUSY (231, All pipe instances are busy).</p></li>
</ul>
</div>
    <div id="processx-303" class="section level1">
<h1 class="page-header" data-toc-text="3.0.3">
<a href="#processx-303" class="anchor"></a>processx 3.0.3<small> 2018-05-07 </small>
</h1>
<ul>
<li><p>Fix a crash on windows when trying to run a non-existing command (<a href='https://github.com/r-lib/processx/issues/90'>#90</a>)</p></li>
<li><p>Fix a race condition in <code>process$restart()</code></p></li>
<li><p><code><a href="../reference/run.html">run()</a></code> and <code>process$new()</code> do not support the <code>commandline</code> argument any more, because process cleanup is error prone with an intermediate shell. (<a href='https://github.com/r-lib/processx/issues/88'>#88</a>)</p></li>
<li><p><code>processx</code> process objects no longer use R connection objects, because the R connection API was retroactive made private by R-core <code>processx</code> uses its own connection class now to manage standard output and error of the process.</p></li>
<li><p>The encoding of the standard output and error can be specified now, and <code>processx</code> re-encodes <code>stdout</code> and <code>stderr</code> in UTF-8.</p></li>
<li><p>Cloning of process objects is disables now, as it is likely that it causes problems (<a href='https://github.com/wch'>@wch</a>).</p></li>
<li><p><code>supervise</code> option to kill child process if R crashes (<a href='https://github.com/wch'>@wch</a>).</p></li>
<li><p>Add <code>get_output_file</code> and <code>get_error_file</code>, <code>has_output_connection()</code> and <code>has_error_connection()</code> methods (<a href='https://github.com/wch'>@wch</a>).</p></li>
<li><p><code>stdout</code> and <code>stderr</code> default to <code>NULL</code> now, i.e. they are discarded (<a href='https://github.com/wch'>@wch</a>).</p></li>
<li><p>Fix undefined behavior when stdout/stderr was read out after the process was already finalized, on Unix.</p></li>
<li><p><code><a href="../reference/run.html">run()</a></code>: Better message on interruption, kill process when interrupted.</p></li>
<li><p>Unix: better kill count on unloading the package.</p></li>
<li><p>Unix: make wait() work when SIGCHLD is not delivered for some reason.</p></li>
<li><p>Unix: close inherited file descriptors more conservatively.</p></li>
<li><p>Fix a race condition and several memory leaks on Windows.</p></li>
<li><p>Fixes when running under job control that does not allow breaking away from the job, on Windows.</p></li>
</ul>
</div>
    <div id="processx-2001" class="section level1">
<h1 class="page-header" data-toc-text="2.0.0.1">
<a href="#processx-2001" class="anchor"></a>processx 2.0.0.1<small> 2017-07-30 </small>
</h1>
<p>This is an unofficial release, created by CRAN, to fix compilation on Solaris.</p>
</div>
    <div id="processx-200" class="section level1">
<h1 class="page-header" data-toc-text="2.0.0">
<a href="#processx-200" class="anchor"></a>processx 2.0.0<small> 2017-05-30 </small>
</h1>
<p>First public release.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>

</div>


      <footer>
      <div class="copyright">
  <p>Developed by <a href='https://github.com/gaborcsardi'>Gábor Csárdi</a>, <a href='https://github.com/wch'>Winston Chang</a>, <a href='https://www.rstudio.com'><img src='https://www.tidyverse.org/rstudio-logo.svg' alt='RStudio' height='24' /></a>, Mango Solutions.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


